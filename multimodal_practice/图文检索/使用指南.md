# ğŸš€ Flickr8K å¤šæ¨¡æ€æ£€ç´¢ç³»ç»Ÿ - å®Œæ•´ä½¿ç”¨æŒ‡å—

## ğŸ“ ä½ ç°åœ¨çš„ä½ç½®
âœ… æ•°æ®å·²å‡†å¤‡å®Œæˆï¼ˆ8000å¼ å›¾åƒï¼Œ40000æ¡æ ‡æ³¨ï¼‰
ğŸ¯ **ä¸‹ä¸€æ­¥ï¼šè®­ç»ƒæ¨¡å‹**

## ğŸ›¤ï¸ å®Œæ•´æµç¨‹ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰

### 1ï¸âƒ£ è®­ç»ƒåŒæµç¼–ç å™¨æ¨¡å‹
```powershell
# åŸºç¡€è®­ç»ƒï¼ˆæ¨èæ–°æ‰‹ï¼Œå¿«é€Ÿå®Œæˆï¼‰
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe train_dual_encoder.py --epochs 5 --batch_size 16 --lr 1e-4 --device cpu

# å¦‚æœæœ‰GPUï¼ˆæ•ˆæœæ›´å¥½ï¼‰
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe train_dual_encoder.py --epochs 20 --batch_size 64 --lr 1e-4 --device cuda
```

**è®­ç»ƒå®Œæˆåä¼šç”Ÿæˆï¼š**
- `checkpoints/best.pth` - æœ€ä½³æ¨¡å‹æƒé‡
- `data/vocab.json` - è¯æ±‡è¡¨æ–‡ä»¶

### 2ï¸âƒ£ æ„å»ºæ£€ç´¢ç´¢å¼•
```powershell
# ä¸ºè®­ç»ƒå¥½çš„æ¨¡å‹æ„å»ºFAISSç´¢å¼•ï¼ˆç”¨äºå¿«é€Ÿæ£€ç´¢ï¼‰
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe build_index.py --ckpt checkpoints/best.pth --index_dir indexes
```

**æ„å»ºå®Œæˆåä¼šç”Ÿæˆï¼š**
- `indexes/` ç›®å½•åŒ…å«FAISSç´¢å¼•æ–‡ä»¶

### 3ï¸âƒ£ ä½¿ç”¨æ¨¡å‹çš„å‡ ç§æ–¹å¼

#### æ–¹å¼Aï¼šå‘½ä»¤è¡Œæ¨ç†
```powershell
# æ–‡æœ¬â†’å›¾åƒæ£€ç´¢
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe infer.py --mode t2i --query "a dog running in the park" --k 5

# å›¾åƒâ†’æ–‡æœ¬æ£€ç´¢
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe infer.py --mode i2t --query "data/raw/Flicker8k_Dataset/æŸå¼ å›¾ç‰‡.jpg" --k 5
```

#### æ–¹å¼Bï¼šå¯åŠ¨Webæ¼”ç¤ºç•Œé¢
```powershell
# å¯åŠ¨Gradioç•Œé¢ï¼ˆæ¨èï¼ç›´è§‚æ˜“ç”¨ï¼‰
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe gradio_demo.py
```
ç„¶åè®¿é—®ï¼šhttp://localhost:7860

#### æ–¹å¼Cï¼šå¯åŠ¨APIæœåŠ¡
```powershell
# å¯åŠ¨FastAPIæœåŠ¡
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe -m uvicorn api_server:app --host 0.0.0.0 --port 8000
```
ç„¶åè®¿é—®ï¼šhttp://localhost:8000/docs

## ğŸ“Š é¢„æœŸæ•ˆæœ

### è®­ç»ƒè¿‡ç¨‹ä¸­ä½ ä¼šçœ‹åˆ°ï¼š
```
Building vocabulary...
Vocabulary size: 2000+
Loading training data...
Loading validation data...
Starting training...
Epoch 1/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 250/250 [05:30<00:00, 0.75batch/s]
Train Loss: 0.8532, Val Loss: 0.7234, R@1: 15.2%, R@5: 35.6%
...
```

### æœ€ç»ˆä½¿ç”¨æ•ˆæœï¼š
- **æ–‡æœ¬â†’å›¾åƒ**ï¼šè¾“å…¥"ä¸€åªç‹—åœ¨å…¬å›­è·‘æ­¥" â†’ è¿”å›5å¼ æœ€ç›¸å…³çš„ç‹—ç‹—å›¾ç‰‡
- **å›¾åƒâ†’æ–‡æœ¬**ï¼šä¸Šä¼ ç‹—ç‹—ç…§ç‰‡ â†’ è¿”å›5å¥æœ€ç›¸å…³çš„æè¿°æ–‡å­—

## ğŸ”§ æ•…éšœæ’é™¤

### å¦‚æœè®­ç»ƒå‡ºé”™ï¼š
1. **å†…å­˜ä¸è¶³**ï¼šå‡å°batch_sizeåˆ°8æˆ–16
2. **æ‰¾ä¸åˆ°CUDA**ï¼šæ·»åŠ `--device cpu`
3. **å¯¼å…¥é”™è¯¯**ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ

### å¦‚æœæ¨ç†å‡ºé”™ï¼š
1. **æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨**ï¼šç¡®ä¿è®­ç»ƒå®Œæˆä¸”checkpoints/best.pthå­˜åœ¨
2. **ç´¢å¼•æ–‡ä»¶ä¸å­˜åœ¨**ï¼šå…ˆè¿è¡Œbuild_index.py

## â±ï¸ æ—¶é—´ä¼°ç®—

- **è®­ç»ƒ**ï¼š5 epochsçº¦30åˆ†é’Ÿï¼ˆCPUï¼‰ï¼Œ10åˆ†é’Ÿï¼ˆGPUï¼‰
- **æ„å»ºç´¢å¼•**ï¼šçº¦5åˆ†é’Ÿ
- **æ¨ç†**ï¼šæ¯æ¬¡æŸ¥è¯¢1-2ç§’

## ğŸ¯ å¿«é€Ÿå¼€å§‹å‘½ä»¤

å¦‚æœä½ æƒ³ç«‹å³å¼€å§‹ï¼Œå¤åˆ¶è¿™ä¸ªå‘½ä»¤ï¼š

```powershell
# åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•å¹¶å¼€å§‹è®­ç»ƒ
cd "c:\Users\rulea\Desktop\å¤šæ¨¡æ€QA"
C:\Users\rulea\Desktop\å¤šæ¨¡æ€QA\.conda\python.exe train_dual_encoder.py --epochs 5 --batch_size 16 --lr 1e-4 --device cpu
```

è®­ç»ƒå®Œæˆåå†è¿è¡Œåç»­æ­¥éª¤ï¼
